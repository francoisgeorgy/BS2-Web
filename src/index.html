<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bass Station II Web Interface</title>
    <link href="https://fonts.googleapis.com/css?family=Roboto|Roboto+Condensed:400,700" rel="stylesheet">
    <link rel="stylesheet" media="all" href="css/layout.css" />
    <link rel="stylesheet" media="all" href="css/dark-theme.css" />
    <link rel="stylesheet" href="lib/lity.min.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="lib/lity.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="lib/webmidi.min.js"></script>
    <script src="jquery.knob.js"></script>
    <script src="bs2.js"></script>
    <script src="app.js"></script>
</head>
<body>
    <main>
        <div class="head">
            <span class="novation-blue">Bass Station II Web Interface</span><span id="patch" class="novation-blue">&nbsp;&nbsp;&bull;&nbsp;&nbsp;Patch</span>
            <span id="patch-number" class="novation-blue">-</span>
            <span class="commands">
                <button id="cmd-save" title="Save the current configuration in the browser local storage">save</button>
                <button id="cmd-import" title="Import a configuration from a file (will not send to the BS2)">import</button>
                <button id="cmd-export" title="Export the current configuration in a file">export</button>
                <button id="cmd-send" title="Send all parameters to the connected Bass Stations II">send</button>
                <button id="cmd-init" title="Set all parameters to their default value">init</button>
                <button id="cmd-randomize" title="Set all parameters to a random value">random</button>
                <button id="cmd-record" class="large-space-left" title="Record all MIDI messages sent and received">record</button>
                <button id="cmd-play" title="Play previously recorded messages.">play</button>
            </span>
            <div id="midi-out-status">OUT</div>
            <div id="midi-in-status">IN</div>
            <div id="midi-status">midi</div>
        </div>

        <!--
          -- SUB OSCILLATOR
          -->
        <div id="sub">
            <h1 class="reset-handler">Sub</h1>
            <div>
                <label>Octave:</label>
                <select id="cc-81">
                </select>
                <select id="cc-80" style="margin-left:10px">
                </select>
            </div>
        </div>

        <!--
          -- LFO 1
          -->
        <div id="lfo1">
            <h1 class="reset-handler">LFO 1</h1>
            <div class="space-after">
                <select id="cc-88">
                </select>
            </div>
            <div class="space-after" style="text-align: center">
                <input id="nrpn-89" type="hidden" value="0" /><span id="nrpn-89-handle" class="handle value off">Key Sync</span>
            </div>
            <div class="group">
                <div class="control row">
                    <input id="cc-86" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Delay</label>
                </div>
            </div>
            <div class="group">
                <div class="control row">
                    <input id="cc-18" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Speed</label>
                </div>
            </div>
            <div class="group space-after">
                <div class="control " style="margin-right:0">
                    <select id="nrpn-88">   <!-- FN key "Speed/Sync LFO 1" -->
                    </select>
                    <select id="nrpn-87">   <!-- Sync value -->
                    </select>
                </div>
            </div>
            <div class="group">
                <div class="control">
                    <input id="nrpn-86" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Slew</label>
                </div>
            </div>
        </div>

        <!--
          -- LFO 2
          -->
        <div id="lfo2">
            <h1 class="reset-handler">LFO 2</h1>
            <div class="space-after">
                <!--<label>Wave:</label>-->
                <select id="cc-89">
                </select>
            </div>
            <div class="space-after" style="text-align: center">
                <input id="nrpn-93" type="hidden" value="0" /><span id="nrpn-93-handle" class="handle value off">Key Sync</span>
            </div>
            <div class="group">
                <div class="control row">
                    <input id="cc-87" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Delay</label>
                </div>
            </div>
            <div class="group">
                <div class="control row">
                    <input id="cc-19" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Speed</label>
                </div>
            </div>
            <div class="group space-after">
                <div class="control row">
                    <select id="nrpn-92">   <!-- FN key "Speed/Sync LFO 2" -->
                    </select>
                    <select id="nrpn-91">   <!-- Sync value -->
                    </select>
                </div>
            </div>
            <div class="group">
                <div class="control">
                    <input id="nrpn-90" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Slew</label>
                </div>
            </div>
        </div>

        <!--
          -- OSCILLATOR 1
          -->
        <div id="osc1">
            <h1 class="reset-handler">Osc 1</h1>
            <div>
                <div class="group left space-after">
                    <div class="control double">
                        <select id="cc-70">
                        </select>
                        <select id="nrpn-72">   <!-- osc1 waveform -->
                        </select>
                    </div>
                </div>
                <div class="group space-after">
                    <div class="control row">
                        <input id="cc-27" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Coarse</label>
                    </div>
                    <div class="control row">
                        <input id="cc-26" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Fine</label>
                    </div>
                </div>
                <div class="group space-after">
                    <div class="control row">
                        <input id="cc-71" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Mod Env</label>
                    </div>
                    <div class="control row">
                        <input id="cc-28" class="dial" data-width="60" data-height="60" value="0" />
                        <label>LFO 1</label>
                    </div>
                </div>
                <div id="osc1-pw-controls">
                    <div class="group">
                        <div class="control row double">
                            <input id="cc-74" class="dial" data-width="60" data-height="60" value="0" />
                            <label>Man PW</label>
                        </div>
                    </div>
                    <div class="group">
                        <div class="control row">
                            <input id="cc-72" class="dial" data-width="60" data-height="60" value="0" />
                            <label>Mod Env</label>
                        </div>
                        <div class="control row">
                            <input id="cc-73" class="dial" data-width="60" data-height="60" value="0" />
                            <label>LFO 2</label>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <!--
          -- OSCILLATOR 2
          -->
        <div id="osc2">
            <div class="subhead">
                <input id="cc-110" type="hidden" value="0" /><span id="cc-110-handle" class="handle value off">1-2 Sync</span>
            </div>
            <h1 class="reset-handler">Osc 2</h1>
            <div>
                <div class="group left space-after">
                    <div class="control double">
                        <select id="cc-75">
                        </select>
                        <select id="nrpn-82">   <!-- osc2 waveform -->
                        </select>
                    </div>
                </div>
                <div class="group space-after">
                    <div class="control row">
                        <input id="cc-30" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Coarse</label>
                    </div>
                    <div class="control row">
                        <input id="cc-29" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Fine</label>
                    </div>
                </div>
                <div class="group space-after">
                    <div class="control row">
                        <input id="cc-76" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Mod Env</label>
                    </div>
                    <div class="control row">
                        <input id="cc-31" class="dial" data-width="60" data-height="60" value="0" />
                        <label>LFO 1</label>
                    </div>
                </div>
                <div id="osc2-pw-controls">
                    <div class="group">
                        <div class="control row double">
                            <input id="cc-79" class="dial" data-width="60" data-height="60" value="0" />
                            <label>Man PW</label>
                        </div>
                    </div>
                    <div class="group space-after">
                        <div class="control row">
                            <input id="cc-77" class="dial" data-width="60" data-height="60" value="0" />
                            <label>Mod Env</label>
                        </div>
                        <div class="control row">
                            <input id="cc-78" class="dial" data-width="60" data-height="60" value="0" />
                            <label>LFO 2</label>
                        </div>
                    </div>
                </div>
                <!--<div style="text-align: center">-->
                    <!--<input id="cc-110" type="hidden" value="0" /><span id="cc-110-handle" class="handle value off">Osc 1-2 Sync</span>-->
                <!--</div>-->
            </div>
        </div>

        <!--
          -- MIXER
          -->
        <div id="mixer">
            <h1 class="reset-handler">Mixer</h1>
            <div class="group left space-after">
                <div class="control">&nbsp;</div>
            </div>
            <div class="group space-after">
                <div class="control row">
                    <input id="cc-22" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Sub</label>
                </div>
                <div class="control row">
                    <input id="cc-20" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Osc 1</label>
                </div>
                <div class="control row">
                    <input id="cc-21" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Osc 2</label>
                </div>
            </div>

            <div class="group">
                <div class="control row">
                    <input id="cc-25" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Ext</label>
                </div>
                <div class="control row">
                    <input id="cc-24" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Ring</label>
                </div>
                <div class="control row">
                    <input id="cc-23" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Noise</label>
                </div>
            </div>
        </div>

        <!--
          -- FILTER
          -->
        <div id="filter">
            <h1 class="reset-handler">Filter</h1>
            <div>
                <div class="group space-after">
                    <select id="cc-83">
                    </select>
                    <select id="cc-106">
                    </select>
                    <select id="cc-84">
                    </select>
                </div>
                <div class="group space-after">
                    <div class="control row">
                        <input id="cc-82" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Resonance</label>
                    </div>
                    <div class="control row">
                        <input id="cc-16" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Frequency</label>
                    </div>
                </div>
                <div class="group">
                    <div class="control row">
                        <input id="cc-114" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Overdrive</label>
                    </div>
                    <div class="control row">
                        <input id="cc-85" class="dial" data-width="60" data-height="60" value="0" />
                        <label>Mod Env</label>
                    </div>
                    <div class="control row">
                        <input id="cc-17" class="dial" data-width="60" data-height="60" value="0" />
                        <label>LFO 2</label>
                    </div>
                </div>
            </div>
        </div>

        <!--
          -- EFFECTS
          -->
        <div id="effects">
            <h1 class="reset-handler">Effects</h1>
            <div class="group left space-after">
                <div class="control">&nbsp;</div>
            </div>
            <div class="group space-after">
                <div class="control row">
                    <input id="cc-94" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Distorsion</label>
                </div>
            </div>
            <div class="group">
                <div class="control row">
                    <input id="cc-115" class="dial" data-width="60" data-height="60" value="0" />
                    <label>Osc 2 Filter Mod</label>
                </div>
            </div>
        </div>

        <!--
          -- MOD ENVELOPE
          -->
        <div id="mod-env">
            <div class="subhead">
                <label>Triggering:</label>
                <select id="nrpn-105">
                </select>
            </div>
            <h1 class="reset-handler">Mod Env</h1>
            <div class="group space-after">
                <div class="control row">
                    <input id="cc-102" class="dial" data-width="60" data-height="60" value="0" />
                    <label>A</label>
                </div>
                <div class="control row">
                    <input id="cc-103" class="dial" data-width="60" data-height="60" value="0" />
                    <label>D</label>
                </div>
                <div class="control row">
                    <input id="cc-104" class="dial" data-width="60" data-height="60" value="0" />
                    <label>S</label>
                </div>
                <div class="control row">
                    <input id="cc-105" class="dial" data-width="60" data-height="60" value="0" />
                    <label>R</label>
                </div>
            </div>
            <div>
                <canvas id="mod-ADSR" class="adsr" height="60" width="200"></canvas>
            </div>
        </div>

        <!--
          -- AMP ENVELOPE
          -->
        <div id="amp-env">
            <div class="subhead">
                <label>Triggering:</label>
                <select id="nrpn-73">
                </select>
            </div>
            <h1 class="reset-handler">Amp Env</h1>
            <div class="group space-after">
                <div class="control row">
                    <input id="cc-90" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>A</label>
                </div>
                <div class="control row">
                    <input id="cc-91" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>D</label>
                </div>
                <div class="control row">
                    <input id="cc-92" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>S</label>
                </div>
                <div class="control row">
                    <input id="cc-93" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>R</label>
                </div>
            </div>
            <div>
                <canvas id="amp-ADSR" class="adsr" height="60" width="200"></canvas>
            </div>
        </div>

        <!--
          -- VCA
          -->
        <div id="vca">
            <h1 class="reset-handler">VCA</h1>
            <!--<div class="group left space-after">-->
                <!--<div class="control">&nbsp;</div>-->
            <!--</div>-->
            <div class="control row">
                <input id="cc-95" class="dial" data-width="60" data-height="60" value="0" />
                <label>VCA Limiter</label>
            </div>
        </div>

        <!--
          -- MOD WHEELS
          -->
        <div id="wheels">
            <!--<h1 style="float:left;margin-right:10px">Wheels</h1>-->
            <!--<div class="group" style="margin-top:10px">-->
            <h1 class="reset-handler">Wheels</h1>
            <div class="group">
                <div class="control row">
                    <input id="nrpn-70" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>LFO 1 Osc Pitch</label>
                </div>
                <div class="control row space-left">
                    <input id="nrpn-71" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>LFO 2 Filter Freq</label>
                </div>
                <div class="control row space-left">
                    <input id="nrpn-78" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Osc 2 Pitch</label>
                </div>
                <div class="control row space-left">
                    <input id="nrpn-94" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Filter Freq</label>
                </div>
                <div class="control row space-left">
                    <input id="cc-107" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Osc Pitch Bend</label>
                </div>
            </div>
        </div>

        <!--
          -- KEYBOARD
          -->
        <div id="keyboard">
            <h1 class="reset-handler">Keyboard</h1>
            <div class="group">
                <div class="control row">
                    <input id="cc-64" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Sustain</label>
                </div>
                <div class="control row" style="margin-right:0">
                    <input id="cc-5" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Glide</label>
                </div>
                <div class="large-spacer">
                    &nbsp;
                </div>
                <div class="row" style="margin-top:-20px">
                    <!--<label>&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; aftertouch &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</label>-->
                    <fieldset style="padding:10px 0 0 0;border:0;border-top:1px solid #707070;margin: -5px 0 0;color:#707070">
                        <legend style=" margin:0 auto;">Aftertouch</legend>
                    <!--<div style="border-top:1px solid #aaa;padding-top:10px">-->
                        <div class="control row">
                            <input id="nrpn-75" class="dial" data-width="60" data-height="60" value="0"/>
                            <label>LFO 1<br />Osc 1+2</label>
                        </div>
                        <div class="control row">
                            <input id="nrpn-76" class="dial" data-width="60" data-height="60" value="0"/>
                            <label>LFO 2<br />Speed</label>
                        </div>
                        <div class="control row" style="margin-right:0">
                            <input id="nrpn-74" class="dial" data-width="60" data-height="60" value="0"/>
                            <label>Filter Freq</label>
                        </div>
                        <!--</div>-->
                    </fieldset>
                </div>
                <div class="large-spacer">
                    &nbsp;
                </div>
                <div class="row" style="margin-top:-20px">
                    <fieldset style="padding:10px 0 0 0;border:0;border-top:1px solid #707070;margin: -5px 0 0;color:#707070">
                        <legend style=" margin:0 auto;">Velocity</legend>
                        <div class="control row">
                            <input id="cc-112" class="dial" data-width="60" data-height="60" value="0"/>
                            <label>Amp Env</label>
                        </div>
                        <div class="control row">
                            <input id="cc-113" class="dial" data-width="60" data-height="60" value="0"/>
                            <label>Mod Env</label>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>

        <!--
          -- ARPEGGIATOR
          -->
        <div id="arpeggiator">
            <h1 class="reset-handler" style="float:left;margin-right:10px">ARP</h1>
            <div class="group" style="margin-top:10px">

                <div class="row">
                    <table>
                        <tr>
                            <td align="right" width="60">
                                <input id="cc-108" type="hidden" value="0" /><span id="cc-108-handle" class="handle value off">ARP</span>
                            </td>
                            <td align="right" style="padding-left:20px">
                                <label class="row">Rhythm</label>
                            </td>
                            <td>
                                <select id="cc-119">
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" width="60">
                                <input id="cc-109" type="hidden" value="0" /><span id="cc-109-handle" class="handle value off">Latch</span>
                            </td>
                            <td align="right" style="padding-left:20px">
                                <label class="row">Octaves</label>
                            </td>
                            <td>
                                <select id="cc-111">
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" width="60">
                                <input id="nrpn-106" type="hidden" value="0" /><span id="nrpn-106-handle" class="handle value off">Retrig</span>
                            </td>
                            <td align="right" style="padding-left:20px">
                                <label>Note mode</label>
                            </td>
                            <td>
                                <select id="cc-118">
                                </select>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="control row large-space-left">
                    <input id="cc-116" class="dial" data-width="60" data-height="60" value="0"/>
                    <label>Swing</label>
                </div>


                <!--
                <div class="row">
                    <div style="text-align: center">
                        <label id="cc-108" class="off">ARP OFF</label>
                    </div>
                    <div style="text-align: center">
                        <label id="cc-109" class="off">Latch OFF</label>
                    </div>
                    <div style="text-align: center">
                        <label id="nrpn-106" class="off">Retrig OFF</label>
                    </div>
                </div>
                <div class="row">
                    <div>
                        <label class="row">Rhythm</label>
                        <select id="cc-119">
                        </select>
                    </div>
                    <div>
                        <label class="row">Octaves</label>
                        <select id="cc-111">
                        </select>
                    </div>
                    <div>
                        <label>Note mode</label>
                        <select id="cc-118">
                        </select>
                    </div>
                </div>
                -->

            </div>
        </div>


        <!--
          -- MIDI MESSAGES
          -->
        <div id="midi">
            <div class="midi-messages">
                in
                <div id="midi-messages-in">
                </div>
            </div>
            <div class="midi-messages">
                out
                <div id="midi-messages-out">
                </div>
            </div>
        </div>


        <!--
          -- STATUS and MESSAGES
          -->
        <div id="status">
        </div>

    </main>
    <footer></footer>

    <div id="import-dialog" style="overflow:auto;background:#FDFDF6;color:#000;padding:20px;min-width:400px;max-width:90%;border-radius:6px"  class="lity-hide">
        <h1>Patch import</h1>
        <div id="import-dialog-instructions">
            Select a file containing a BS2 patch (sysex data).
        </div>
        <div style="margin:10px 0;">
            <input type="file" id="patch-file" placeholder="patch file" />
        </div>
        <div id="import-dialog-error" style="margin:10px 0;color:red">
        </div>
    </div>

</body>
</html>